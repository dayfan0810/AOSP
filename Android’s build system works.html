<!DOCTYPE html>
<!-- saved from url=(0031) -->
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Work Full Page | Premium HTML5 Template</title>
	
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!--[if !IE]><!--><div class="fit-vids-style" id="fit-vids-style" style="display: none;">­<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></div><script>if (/*@cc_on!@*/false) { document.documentElement.className+=' lt-ie10'; }</script><!--<![endif]--> 

    <link rel="stylesheet" id="framework-css" href="css/framework.css" type="text/css" media="all">
    <link rel="stylesheet" id="main-css" href="css/style.css" type="text/css" media="all">
    <link rel="stylesheet" id="mobile-css" href="css/mobile.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/tipTip.css">
    
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-migrate.min.js"></script>
</head>
<body>
	
		
	<div id="theme-wrapper">
		
		
	
		
	<div id="primary-container" class="portfolio-template" >
	
    	<div class="work-post format-image">
        	<div class="preview-img">
            	<img src="images/howmany.png" alt="">
                <header class="entry-header">
                    <h2>CM14.1的构建机制</h2>
                <span>Date:  Apr 10, 2017  Views: 3479</span>
                </header><!-- .entry-header -->
            </div>
            <div class="work-content">






               
                <p>
                想知道CM14.1可以构建多少个型号?用下面这个命令
              </p>
                <div class="highlighter-rouge"><pre class="highlight"><code>$ find . -name Android.mk | wc -l
</code></pre>
</div>
<p>可以看到有3865个modules.
<p>
如下为Android build system 概览
</p>

<div class="preview-img">
       	<img src="images/Overview.png" alt="">
                
            </div>
            
            <h1>
            配置
            </h1>
            
            <h3>
            构建系统的首要任务之一就是配置config.mk。</h3>
            <h3>构建可以通过如下两种方式: </h3>
            <p>
            1.envsetup.sh and lunch 命令<br/>
            2.提供buildspec.mk 在根目录
            </p>
            
            <h3>
            envsetup.sh是干嘛的?<br/>
            <h4>
            
            尽管envsetup.sh不是实际工作的一部分,但为初始化了build 环境.
            </h4>
            </h3>
            <div class="highlighter-rouge"><pre class="highlight"><code>$ . build/envsetup.sh
$ hmm
Invoke ". build/envsetup.sh" from your shell to add the following functions to
your environment:
- croot	切换到源码树的根目录
- m	在源码树的根目录执行 make
- mm	Build 当前目录下的模块
- mmm	Build 指定目录下的模块
- cgrep	在所有 C/C++ 文件上执行 grep
- jgrep	在所有 Java 文件上执行 grep
- resgrep	在所有 res/*.xml 文件上执行 grep
- godir	转到包含某个文件的目录路径
- printconfig	显示当前 Build 的配置信息
- add_lunch_combo	在 lunch 函数的菜单中添加一个条目
   -------------------等等几十个命令------------------
</code></pre>
<h4>
Make 文件说明
整个 Build 系统的入口文件是源码树根目录下名称为“Makefile”的文件，当在源代码根目录上调用 make 命令时，make 命令首先将读取该文件。
Makefile 文件的内容只有一行：“include build/core/main.mk”。该行代码的作用很明显：包含 build/core/main.mk 文件。在 main.mk 文件中又会包含其他的文件，其他文件中又会包含更多的文件，这样就引入了整个 Build 系统。
这些 Make 文件间的包含关系是相当复杂的，图 3 描述了这种关系，该图中黄色标记的文件（且除了 $开头的文件）都位于 build/core/ 目录下。
</h4>
<div class="preview-img">
       	<img src="images/makefileenter.png" alt="">
                
            </div>

            
            
            
               
                    <div class="clearfix"></div>
            <div class="tags">
					<a href="#" rel="tag">about</a> <a href="#" rel="tag">airtheme</a> <a href="#" rel="tag">social</a>			
            </div>
            <div class="right-work-info">
            	<span class="post-share">
                	<div class="post-share-links">
                    	<a href="https://twitter.com/intent/tweet?=More%20filters!&amp;tw_p=tweetbutton&amp;url=http://urlpost.com/&amp;text=titile post" target="_blank" class="share-icon fb">Share Facebook</a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=http://urlpost.com/" target="_blank" class="share-icon tw">Share Twitter</a>
                        <a href="http://pinterest.com/pin/create/bookmarklet/?media=http://urlpost.com/1.jpg&http://urlpost.com/" target="_blank" class="share-icon gg">Share Pinterest</a>
                    </div>
                </span>
                <a href="#" class="post-like post-like " title="You already like this"><div class="post-like-info">4</div></a>
            </div>
            <div class="clearfix"></div>
            
            
        </div>
        
	            
    </div><!-- END #primary-container --> 	
    </div><!-- END #theme-wrapper -->



</body></html>